# ============================================================
# Kafka Topic Configuration â€” Real-Time Sports Event Streaming
# ============================================================
# Applied via kafka-topics.sh or Confluent Cloud Terraform

# --- match-events-raw ---
# Raw events from stadium gateway. Single source of truth.
[topic:match-events-raw]
partitions=12
replication.factor=3
min.insync.replicas=2
retention.ms=604800000         # 7 days
cleanup.policy=delete
compression.type=lz4
segment.bytes=1073741824       # 1 GB segments
message.timestamp.type=CreateTime
# Partition key: match_id (ensures ordering per match)

# --- match-events-enriched ---
# Events enriched by Flink (player names, xG, etc.)
[topic:match-events-enriched]
partitions=12
replication.factor=3
min.insync.replicas=2
retention.ms=2592000000        # 30 days
cleanup.policy=delete
compression.type=lz4
segment.bytes=1073741824

# --- match-events-notifications ---
# Fan-out for push notification workers
[topic:match-events-notifications]
partitions=24                  # Higher parallelism for notification fan-out
replication.factor=3
min.insync.replicas=2
retention.ms=86400000          # 1 day
cleanup.policy=delete
compression.type=lz4
# Partition key: user_segment_hash

# --- match-events-odds ---
# Betting odds recalculation triggers
[topic:match-events-odds]
partitions=6
replication.factor=3
min.insync.replicas=2
retention.ms=86400000          # 1 day
cleanup.policy=delete
compression.type=lz4
# Partition key: market_id

# --- match-events-analytics ---
# Analytics aggregation events
[topic:match-events-analytics]
partitions=12
replication.factor=3
min.insync.replicas=2
retention.ms=2592000000        # 30 days
cleanup.policy=delete
compression.type=lz4

# --- match-events-dlq ---
# Dead Letter Queue for failed processing
[topic:match-events-dlq]
partitions=6
replication.factor=3
min.insync.replicas=2
retention.ms=2592000000        # 30 days
cleanup.policy=delete
compression.type=lz4
