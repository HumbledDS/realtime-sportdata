# ============================================================
# Kafka Consumer Configuration â€” Flink / Service Consumers
# ============================================================
# Configuration templates for different consumer groups.

# === FLINK ENRICHMENT CONSUMER ===
# [consumer-group:flink-enrichment]
group.id=flink-enrichment-group
auto.offset.reset=earliest
enable.auto.commit=false         # Flink manages offsets via checkpointing
max.poll.records=500
max.poll.interval.ms=300000
session.timeout.ms=30000
heartbeat.interval.ms=10000
fetch.min.bytes=1                # Immediately fetch, minimize latency
fetch.max.wait.ms=100
key.deserializer=org.apache.kafka.common.serialization.StringDeserializer
value.deserializer=io.confluent.kafka.serializers.KafkaAvroDeserializer
schema.registry.url=http://schema-registry:8081
specific.avro.reader=true

# === NOTIFICATION DISPATCHER CONSUMER ===
# [consumer-group:push-dispatcher]
# group.id=push-dispatcher-group
# auto.offset.reset=latest
# enable.auto.commit=false       # Commit only after FCM/APNs confirmation
# max.poll.records=100           # Smaller batches for push dispatch
# max.poll.interval.ms=60000

# === WEBSOCKET GATEWAY CONSUMER ===
# [consumer-group:websocket-gateway]
# group.id=ws-gateway-group
# auto.offset.reset=latest       # Only care about live events
# enable.auto.commit=true
# auto.commit.interval.ms=5000   # Fast commits for WS (at-least-once OK)
# max.poll.records=50            # Small batches for low latency broadcast
# fetch.max.wait.ms=50

# === BETTING/ODDS CONSUMER ===
# [consumer-group:odds-engine]
# group.id=odds-engine-group
# auto.offset.reset=earliest
# enable.auto.commit=false       # Exactly-once via transactional consumer
# isolation.level=read_committed # Only read committed messages
# max.poll.records=1             # Process one event at a time (critical)

# === ANALYTICS/CLICKHOUSE CONSUMER ===
# [consumer-group:analytics-clickhouse]
# group.id=analytics-clickhouse-group
# auto.offset.reset=earliest
# enable.auto.commit=true
# max.poll.records=1000          # Larger batches for analytics throughput
# fetch.min.bytes=16384
# fetch.max.wait.ms=500

# --- Common Connection ---
bootstrap.servers=kafka-1:9092,kafka-2:9092,kafka-3:9092
request.timeout.ms=30000
